-- Struktur tabel untuk menyimpan surat
CREATE TABLE `surat` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `nomor_surat` varchar(50) NOT NULL,
  `jenis_surat` varchar(100) NOT NULL,
  `tanggal` date NOT NULL,
  `tujuan` varchar(255) NOT NULL,
  `template_id` int(11) NOT NULL,
  `konten_data` text NOT NULL,
  `konten_html` text NOT NULL,
  `created_at` datetime NOT NULL,
  `created_by` int(11) NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `updated_by` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- Struktur tabel untuk template surat
CREATE TABLE `template_surat` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `nama_template` varchar(100) NOT NULL,
  `kode_template` varchar(50) NOT NULL,
  `deskripsi` text DEFAULT NULL,
  `konten_html` text NOT NULL,
  `fields` text NOT NULL,
  `aktif` tinyint(1) NOT NULL DEFAULT 1,
  `created_at` datetime NOT NULL,
  `created_by` int(11) NOT NULL,
  `updated_at` datetime DEFAULT NULL,
  `updated_by` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `kode_template` (`kode_template`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- Data awal untuk template surat
INSERT INTO `template_surat` (`id`, `nama_template`, `kode_template`, `deskripsi`, `konten_html`, `fields`, `aktif`, `created_at`, `created_by`) VALUES
(1, 'Surat Keterangan Sakit', 'SKS', 'Template untuk surat keterangan sakit', '<div style="font-family: Arial, sans-serif; line-height: 1.6; margin: 20px;">\r\n    <div style="text-align: center; margin-bottom: 20px;">\r\n        <h2 style="margin-bottom: 5px;">SURAT KETERANGAN SAKIT</h2>\r\n        <p style="margin: 0;">Nomor: {{nomor_surat}}</p>\r\n    </div>\r\n    \r\n    <p>Yang bertanda tangan di bawah ini:</p>\r\n    \r\n    <table style="margin-left: 20px; margin-bottom: 20px;">\r\n        <tr>\r\n            <td style="width: 150px;">Nama Dokter</td>\r\n            <td>: {{nama_dokter}}</td>\r\n        </tr>\r\n        <tr>\r\n            <td>SIP</td>\r\n            <td>: {{nomor_sip}}</td>\r\n        </tr>\r\n    </table>\r\n    \r\n    <p>Menerangkan dengan sesungguhnya bahwa:</p>\r\n    \r\n    <table style="margin-left: 20px; margin-bottom: 20px;">\r\n        <tr>\r\n            <td style="width: 150px;">Nama</td>\r\n            <td>: {{nama_pasien}}</td>\r\n        </tr>\r\n        <tr>\r\n            <td>Umur</td>\r\n            <td>: {{umur_pasien}} tahun</td>\r\n        </tr>\r\n        <tr>\r\n            <td>Alamat</td>\r\n            <td>: {{alamat_pasien}}</td>\r\n        </tr>\r\n        <tr>\r\n            <td>Diagnosa</td>\r\n            <td>: {{diagnosa}}</td>\r\n        </tr>\r\n    </table>\r\n    \r\n    <p>Berdasarkan hasil pemeriksaan yang telah dilakukan, pasien tersebut membutuhkan istirahat selama {{lama_istirahat}} hari, terhitung mulai tanggal {{tanggal_mulai}} sampai dengan tanggal {{tanggal_selesai}}.</p>\r\n    \r\n    <p>Demikian surat keterangan ini dibuat untuk dipergunakan sebagaimana mestinya.</p>\r\n    \r\n    <div style="margin-top: 30px; text-align: right;">\r\n        <p>{{tempat}}, {{tanggal_surat}}</p>\r\n        <p style="margin-top: 60px;">{{nama_dokter}}</p>\r\n    </div>\r\n</div>', '[{"name":"nama_dokter","label":"Nama Dokter","type":"text","placeholder":"Masukkan nama dokter"},{"name":"nomor_sip","label":"Nomor SIP","type":"text","placeholder":"Masukkan nomor SIP dokter"},{"name":"nama_pasien","label":"Nama Pasien","type":"text","placeholder":"Masukkan nama pasien"},{"name":"umur_pasien","label":"Umur Pasien","type":"text","placeholder":"Masukkan umur pasien"},{"name":"alamat_pasien","label":"Alamat Pasien","type":"textarea","placeholder":"Masukkan alamat pasien"},{"name":"diagnosa","label":"Diagnosa","type":"text","placeholder":"Masukkan diagnosa"},{"name":"lama_istirahat","label":"Lama Istirahat (hari)","type":"text","placeholder":"Masukkan lama istirahat"},{"name":"tanggal_mulai","label":"Tanggal Mulai","type":"date","placeholder":""},{"name":"tanggal_selesai","label":"Tanggal Selesai","type":"date","placeholder":""},{"name":"tempat","label":"Tempat","type":"text","placeholder":"Masukkan tempat"},{"name":"tanggal_surat","label":"Tanggal Surat","type":"date","placeholder":""}]', 1, '2023-03-20 00:00:00', 1),
(2, 'Surat Rujukan', 'SRJ', 'Template untuk surat rujukan', '<div style="font-family: Arial, sans-serif; line-height: 1.6; margin: 20px;">\r\n    <div style="text-align: center; margin-bottom: 20px;">\r\n        <h2 style="margin-bottom: 5px;">SURAT RUJUKAN</h2>\r\n        <p style="margin: 0;">Nomor: {{nomor_surat}}</p>\r\n    </div>\r\n    \r\n    <p>Kepada Yth:</p>\r\n    <p style="margin-left: 20px;">{{tujuan_rujukan}}</p>\r\n    <p style="margin-left: 20px;">{{alamat_tujuan}}</p>\r\n    \r\n    <p>Dengan hormat,</p>\r\n    <p>Bersama ini kami kirimkan pasien :</p>\r\n    \r\n    <table style="margin-left: 20px; margin-bottom: 20px;">\r\n        <tr>\r\n            <td style="width: 150px;">Nama</td>\r\n            <td>: {{nama_pasien}}</td>\r\n        </tr>\r\n        <tr>\r\n            <td>Tanggal Lahir</td>\r\n            <td>: {{tanggal_lahir_pasien}}</td>\r\n        </tr>\r\n        <tr>\r\n            <td>Alamat</td>\r\n            <td>: {{alamat_pasien}}</td>\r\n        </tr>\r\n        <tr>\r\n            <td>No. Rekam Medis</td>\r\n            <td>: {{no_rekam_medis}}</td>\r\n        </tr>\r\n    </table>\r\n    \r\n    <p><strong>Anamnesis:</strong></p>\r\n    <p style="margin-left: 20px;">{{anamnesis}}</p>\r\n    \r\n    <p><strong>Pemeriksaan Fisik:</strong></p>\r\n    <p style="margin-left: 20px;">{{pemeriksaan_fisik}}</p>\r\n    \r\n    <p><strong>Diagnosis:</strong></p>\r\n    <p style="margin-left: 20px;">{{diagnosis}}</p>\r\n    \r\n    <p><strong>Terapi yang telah diberikan:</strong></p>\r\n    <p style="margin-left: 20px;">{{terapi}}</p>\r\n    \r\n    <p><strong>Tindakan yang telah dilakukan:</strong></p>\r\n    <p style="margin-left: 20px;">{{tindakan}}</p>\r\n    \r\n    <p>Mohon penatalaksanaan lebih lanjut. Terima kasih atas perhatian dan kerjasamanya.</p>\r\n    \r\n    <div style="margin-top: 30px; text-align: right;">\r\n        <p>{{tempat}}, {{tanggal_surat}}</p>\r\n        <p style="margin-top: 60px;">{{nama_dokter}}</p>\r\n        <p>SIP: {{nomor_sip}}</p>\r\n    </div>\r\n</div>', '[{"name":"tujuan_rujukan","label":"Tujuan Rujukan","type":"text","placeholder":"Masukkan tujuan rujukan"},{"name":"alamat_tujuan","label":"Alamat Tujuan","type":"textarea","placeholder":"Masukkan alamat tujuan"},{"name":"nama_pasien","label":"Nama Pasien","type":"text","placeholder":"Masukkan nama pasien"},{"name":"tanggal_lahir_pasien","label":"Tanggal Lahir Pasien","type":"date","placeholder":""},{"name":"alamat_pasien","label":"Alamat Pasien","type":"textarea","placeholder":"Masukkan alamat pasien"},{"name":"no_rekam_medis","label":"No. Rekam Medis","type":"text","placeholder":"Masukkan nomor rekam medis"},{"name":"anamnesis","label":"Anamnesis","type":"textarea","placeholder":"Masukkan anamnesis"},{"name":"pemeriksaan_fisik","label":"Pemeriksaan Fisik","type":"textarea","placeholder":"Masukkan hasil pemeriksaan fisik"},{"name":"diagnosis","label":"Diagnosis","type":"textarea","placeholder":"Masukkan diagnosis"},{"name":"terapi","label":"Terapi yang telah diberikan","type":"textarea","placeholder":"Masukkan terapi yang telah diberikan"},{"name":"tindakan","label":"Tindakan yang telah dilakukan","type":"textarea","placeholder":"Masukkan tindakan yang telah dilakukan"},{"name":"tempat","label":"Tempat","type":"text","placeholder":"Masukkan tempat"},{"name":"tanggal_surat","label":"Tanggal Surat","type":"date","placeholder":""},{"name":"nama_dokter","label":"Nama Dokter","type":"text","placeholder":"Masukkan nama dokter"},{"name":"nomor_sip","label":"Nomor SIP","type":"text","placeholder":"Masukkan nomor SIP dokter"}]', 1, '2023-03-20 00:00:00', 1); 